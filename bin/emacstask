#!/bin/bash

ELISP=$( cat $HOME/.emacs_anywhere/emacs_anywhere.el )

if [ -z "$EA_EDITOR" ]; then
    EA_EDITOR="emacsclient -a '' -c"
fi

$EA_EDITOR -e "(progn
                 (defvar ea-app-name \"\")
                 (setq ea-app-name \"$EA_APP_NAME\")
                 (defvar ea-window-title \"\")
                 (setq ea-window-title \"$EA_WINDOW_TITLE\")
                 $ELISP
                 (run-hook-with-args 'ea-enter-hook ea-app-name ea-window-title))"
