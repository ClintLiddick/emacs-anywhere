#!/bin/bash

if [ -z ${EA_SHOULD_COPY+x} ]; then
    EA_SHOULD_COPY=false
fi

if [ -z ${EA_SHOULD_PASTE+x} ]; then
    EA_SHOULD_PASTE=true
fi

if [ "$EA_SHOULD_COPY" = true ]; then
    xdotool key --clearmodifiers ctrl+c
fi

window=$( xdotool getactivewindow )

. $HOME/.emacs_anywhere/bin/emacstask
. /tmp/eaenv

if [ "$EA_ABORT" = true ]; then
    exit 0;
fi

xdotool windowactivate --sync $window

if [ "$EA_SHOULD_PASTE" = true ]; then
    xdotool key --clearmodifiers ctrl+v
fi
